<div class="container-fluid">
    <div class="row flex-nowrap">
      <%= render 'shared/dashboardnav' %>
      <div class="col py-3">
        <h1 style="color: black">@<%= @project.name %></h1>
        <div class="project-card-container d-flex justify-content-around">
          <div class="project-left-cards-container">
            <div class="dashboard-card project-upperpart-card-chat overflow-hidden">
              <div class="container chatroom overflow-scroll" style= "max-height: 415px" data-controller="chatroom-subscription" data-chatroom-subscription-project-id-value = <%= @project.id  %>>
                <div class="messages" data-chatroom-subscription-target="messages">
                  <% @project.messages.each do |message| %>
                    <%= render "messages/message", message: message %>
                  <% end %>
                  </div>
                  <%= simple_form_for [@project, @message],
                  remote: true,
                  html: {class: "d-flex"} do |f|
                  %>
                  <%= f.input :content,
                    label: false,
                    placeholder: "Message ##{@project.name}",
                    wrapper_html: {class: "flex-grow-1"}
                  %>
                  <%= f.submit "Send", class: "btn btn-primary" %>
                <% end %>
            </div>
            </div>
            <div class="project-bottompart-left-cards">
              <div class="dashboard-card project-bottompart-card-payment mt-3"></div>
            </div>
          </div>


          <div class="project-right-card-container">
            <div class="dashboard-card project-upperpart-card-ideas">
              <div class="ideas-header d-flex justify-content-between">
                <h2>ideas</h2>
                <%= link_to "view all", project_ideas_path(@project) %>
              </div>
              <table class="table">
                <thead>
                  <tr class="table-light">
                    <th scope="col">idea</th>
                    <th scope="col">price</th>
                    <th scope="col">votes</th>
                  </tr>
                </thead>
              <tbody style="border: none">
              <% @ideas.each do |idea| %>
                <tr>
                  <th scope="row"><%= idea.title %></th>
                  <td><%= idea.price %></td>
                  <td><%= idea.total_votes %></td>
                </tr>
              <% end %>
                  </tbody>
                  </table>
            <%= link_to "add idea", new_project_idea_path(@project) %>
            </div>
            <div class="project-bottompart-right-cards ">
              <div class="dashboard-card project-bottompart-card-group">
              <h3>Group participants</h3>
              <p>add users to group</p>
                <%= simple_form_for(User.new, as: :user, url: invitation_path(:user), html: { method: :post }) do |f| %>
                <%= f.error_notification %>

                <%= hidden_field_tag :project_id, @project.id %>

                <div class="d-flex email-bar-button">
                  <% User.invite_key_fields.each do |field| -%>
                    <%= f.input field, placeholder: "Email" %>
                  <% end -%>

                  <div class="form-actions">
                    <%= f.button :submit, t("devise.invitations.new.submit_button"), class: "btn btn-primary" %>
                  </div>
                </div>
              <% end %>

              <p class="copy-link fw-normal">copy link</p>
              <a class="link-at-bottum" href="">s=chrome..69i57j0i512l9.1362j0j15&sourceid=chrome&</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
